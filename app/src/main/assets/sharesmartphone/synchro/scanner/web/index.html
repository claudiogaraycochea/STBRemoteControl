<!DOCTYPE HTML>
<html>
<head>
    <title>ESCANEAR DISPOSITIVO</title>
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height" />
    <meta charset="utf-8" />
    <script type="text/javascript" src="../../../share/js/jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="../../../share/js/sharesmartphone.js"></script>
    <script>


        share.getScannerList = function(data){
            var data = JSON.parse(data);
            for(i=0;i<data.length;i++){
                var engineTitle=data[i].engineTitle;
                var content='<li>'+engineTitle+' <button class="js-btn-connect" value="'+i+'">Conectar</button></li>';
                $("ul.js-scannerList").append(content);
                //$('.js-consoleLog').append(dataString+"<br>");

                share.consoleLog('Dispositivo conectado >'+data[i].engineTitle);
            }            
        }

        $(document).ready(function() {
            
            // Inicializar framework

            var data = {
                defineConnection:'joinGroup',
                engineOrder: 'stb,webrtc,ws',
                tag: 'control',
                synchroMetod: 'scanner'
            }

            share.init(data);

            /* Ejecutar funcion
            var data= {
                func: 'play',
                param: 'x=1&y=2'
            }
            share.send(data);
            */

            $(document).on('click', '.js-btn-connect', function(){
                var i = this.value;
                var data = share.getLocalVarScannerListID(i);
                share.connectEngine(data);
            });

        });	
     
    </script>
</head>
<body>
    <button class="btn medium red">Comenzar a escanear</button> 
    <div class="js-consoleLog"></div>

    <p>
        Dispositivos
    </p>
    <ul class="js-scannerList">
    </ul>
    <button class="js-btn-connect">Test</button>
</body>
</html>